<?xml version="1.0" encoding="UTF-8"?>
<folder name="Tutorial4b">
  <service name="Bartender" provision="expr"/>
  <service name="Sequencer" provision="sequencer"/>
  <service name="Gatsby" provision="expr">
    <prop name="expr.state" OldSportsSaid="NewOldSportsSaid"/>
    <prop name="expr.src" content-type="text/x-erlang"><![CDATA[
NewOldSportsSaid = 0.
    ]]></prop>
  </service>
  <field name="ORDER"/>
  <field name="gin" type="string"/>
  <field name="tonic" type="string"/>
  <mix name="Mix">
    <folder name="Client">
      <notify name="Order" service="Sequencer" fields="ORDER"/>
      <consume name="Drink" service="Gatsby" fields="gin tonic">
        <prop name="expr.src" content-type="text/x-erlang"><![CDATA[
NewOldSportsSaid = OldSportsSaid + 1.
        ]]></prop>
      </consume>
    </folder>
    <folder name="Server">
      <request name="AddGin" service="Bartender" fields="ORDER">
        <prop name="expr.src" content-type="text/x-erlang"><![CDATA[
put("gin", "Gordon's"),
"Ok".
        ]]></prop>
        <reply name="Ok" fields="gin"/>
      </request>
      <request name="AddTonic" service="Bartender" fields="ORDER">
        <prop name="expr.src" content-type="text/x-erlang"><![CDATA[
put("tonic", "Schweppes"),
"Ok".
        ]]></prop>
        <reply name="Ok" fields="tonic"/>
      </request>
    </folder>
  </mix>
</folder>
